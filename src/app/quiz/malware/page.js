'use client';

import { useEffect, useState } from 'react';
import ThemePageWrapper from '../../components/ThemePageWrapper';
import ThemeCard from '../../components/ThemeCard';

export default function MalwareQuizPage() {
  const questions = [
    {
      question: "What does malware stand for?",
      options: ["Malfunctioning hardware", "Malicious software", "Manual warehousing", "Mail software"],
      answer: "Malicious software",
    },
    {
      question: "Which of the following is a type of malware?",
      options: ["Firewall", "Antivirus", "Worm", "VPN"],
      answer: "Worm",
    },
    {
      question: "What is ransomware?",
      options: ["Software that speeds up your system", "Malware that locks files for ransom", "A type of antivirus", "A network firewall"],
      answer: "Malware that locks files for ransom",
    },
    {
      question: "How does malware often spread?",
      options: ["Software updates", "Downloading from trusted sources", "Clicking on suspicious links", "Official security patches"],
      answer: "Clicking on suspicious links",
    },
    {
      question: "Which is a sign of a malware infection?",
      options: ["Improved system performance", "Frequent crashes and pop-ups", "Faster browsing speed", "None of the above"],
      answer: "Frequent crashes and pop-ups",
    },
    {
      question: "What is a trojan horse in cybersecurity?",
      options: ["A friendly virus", "A disguised malware", "An antivirus program", "Security patch"],
      answer: "A disguised malware",
    },
    {
      question: "Spyware is a type of malware designed to:",
      options: ["Improve system performance", "Secretly monitor user activity", "Speed up downloads", "Block ads"],
      answer: "Secretly monitor user activity",
    },
    {
      question: "To reduce the risk of malware, you should:",
      options: ["Download random software", "Use security updates regularly", "Ignore software updates", "Disable firewalls"],
      answer: "Use security updates regularly",
    },
    {
      question: "Which of the following best protects against malware?",
      options: ["Antivirus software", "Outdated software", "Open Wi-Fi networks", "Public computers"],
      answer: "Antivirus software",
    },
    {
      question: "What should you do if you suspect malware on your device?",
      options: ["Continue using it", "Disconnect and run a scan", "Sell your device", "Ignore it"],
      answer: "Disconnect and run a scan",
    },
  ];

  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [score, setScore] = useState(0);
  const [showResult, setShowResult] = useState(false);

  const handleAnswer = (selectedOption) => {
    if (selectedOption === questions[currentQuestion].answer) {
      setScore(score + 1);
    }

    const nextQuestion = currentQuestion + 1;
    if (nextQuestion < questions.length) {
      setCurrentQuestion(nextQuestion);
    } else {
      setShowResult(true);
    }
  };

  useEffect(() => {
    window.scrollTo(0, 0);
  }, [currentQuestion]);

  return (
    <ThemePageWrapper>
      <main className="flex items-center justify-center p-6 flex-grow">
        <ThemeCard className="max-w-2xl w-full">

        <h2 className="text-3xl font-semibold text-cyan-400 mb-4">Malware Prevention Quiz</h2>

        {!showResult ? (
          <div className="w-full">
            <h3 className="text-xl font-semibold mb-4">{questions[currentQuestion].question}</h3>
            <div className="grid grid-cols-1 gap-4">
              {questions[currentQuestion].options.map((option, index) => (
                <button
                  key={index}
                  onClick={() => handleAnswer(option)}
                  className="p-3 rounded-xl bg-cyan-500 hover:bg-cyan-600 text-white transition-colors duration-300"
                >
                  {option}
                </button>
              ))}
            </div>
          </div>
        ) : (
          <div className="text-center">
            <h3 className="text-2xl font-semibold mb-4">Quiz Completed!</h3>
            <p className="text-xl">Your Score: {score} / {questions.length}</p>
          </div>
        )}
        </ThemeCard>
      </main>
    </ThemePageWrapper>
  );
}
